{"ast":null,"code":"var _jsxFileName = \"/Volumes/Macintosh HD - \\u6570\\u636E/privateTest/private/src/pages/register.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Register extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      confirmDirty: false,\n      autoCompleteResult: [],\n      codeId: '',\n      countDown: false,\n      countDownStr: ''\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        dispatch\n      } = this.props;\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          const paramsObj = {\n            name: values.name,\n            phone: values.phone,\n            code: values.code,\n            codeId: this.state.codeId,\n            password: values.password\n          };\n          dispatch(userRegister(paramsObj));\n        }\n      });\n    };\n\n    this.handleConfirmBlur = e => {\n      const value = e.target.value;\n      this.setState({\n        confirmDirty: this.state.confirmDirty || !!value\n      });\n    };\n\n    this.compareToFirstPassword = (rule, value, callback) => {\n      const form = this.props.form;\n\n      if (value && value !== form.getFieldValue('password')) {\n        callback('两次输入的密码不一致!');\n      } else {\n        callback();\n      }\n    };\n\n    this.validateToNextPassword = (rule, value, callback) => {\n      const form = this.props.form;\n\n      if (value.length < 6) {\n        callback('密码长度必须大于6位');\n      }\n\n      if (value && this.state.confirmDirty) {\n        form.validateFields(['confirm'], {\n          force: true\n        });\n      }\n\n      callback();\n    };\n\n    this.setTime = countDownNum => {\n      countDownNum--;\n      countDownStr = countDownNum + 'S';\n      this.setState({\n        countDownStr: countDownStr\n      });\n      timer = setTimeout(() => {\n        this.setTime(countDownNum);\n      }, 1000);\n\n      if (countDownNum === 0) {\n        this.setState({\n          countDown: false\n        });\n        clearTimeout(timer);\n      }\n    };\n\n    this.getCode = props => {\n      const {\n        getFieldValue\n      } = props.form;\n      const {\n        dispatch\n      } = this.props;\n      const phoneNum = getFieldValue('phone'); // console.log(phoneNum)\n\n      if (phoneNum) {\n        dispatch(getRegisterPhoneCode(phoneNum)).then(json => {\n          if (json.code === 200) {\n            this.setState({\n              codeId: json.data.codeId,\n              countDown: true\n            });\n            this.setTime(countDownNum);\n          }\n        });\n      } else {\n        message.error('请输入手机号码！');\n      }\n    };\n  }\n\n  componentWillUnmount() {\n    //清除事件\n    clearTimeout(timer);\n  }\n\n  render() {\n    const {\n      getFieldDecorator\n    } = this.props.form;\n    const formItemLayout = {\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      }\n    };\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0\n        },\n        sm: {\n          span: 16,\n          offset: 8\n        }\n      }\n    }; // const prefixSelector = getFieldDecorator('prefix', {\n    // \tinitialValue: '86',\n    // })(\n    // \t<Select style={{ width: 70 }}>\n    // \t\t<Option value=\"86\">+86</Option>\n    // \t\t{/* <Option value=\"87\">+87</Option> */}\n    // \t</Select>\n    // );\n\n    const GetCodeButton = this.state.countDown ? /*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      size: \"large\",\n      style: {\n        marginLeft: '10px',\n        width: '120px'\n      },\n      disabled: true,\n      onClick: this.getCode.bind(this, this.props),\n      children: this.state.countDownStr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      size: \"large\",\n      style: {\n        marginLeft: '10px',\n        width: '120px'\n      },\n      onClick: this.getCode.bind(this, this.props),\n      children: \"\\u83B7\\u53D6\\u9A8C\\u8BC1\\u7801\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this);\n    const phoneRule = \"^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$\";\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      className: \"user-layout-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-logo\",\n        style: {\n          width: '580px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logoImg,\n          width: 179\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u8BA9\\u6BCF\\u4E2A\\u533B\\u5B66\\u7814\\u7A76\\u53C2\\u4E0E\\u8005\\u90FD\\u653E\\u5FC3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"registerBox\",\n        children: /*#__PURE__*/_jsxDEV(Form, { ...formItemLayout,\n          onSubmit: this.handleSubmit,\n          style: {\n            marginTop: 60\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormItem, {\n            label: \"\\u624B\\u673A\\u53F7\\u7801\",\n            children: getFieldDecorator('phone', {\n              rules: [{\n                required: true,\n                message: '请输入手机号码！',\n                pattern: new RegExp(phoneRule)\n              }]\n            })( /*#__PURE__*/_jsxDEV(Input, {\n              style: {\n                width: '280px'\n              },\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 25\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(FormItem, {\n            label: \"\\u9A8C\\u8BC1\\u7801\",\n            children: [getFieldDecorator('code', {\n              rules: [{\n                required: true,\n                message: '请输入验证码！'\n              }]\n            })( /*#__PURE__*/_jsxDEV(Input, {\n              size: \"large\",\n              style: {\n                width: '150px'\n              },\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 25\n            }, this)), GetCodeButton]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u7528\\u6237\\u540D\" // label={(\n            // \t<span>\n            // \t用户名&nbsp;\n            // \t<Tooltip title=\"你想别人如何称呼你?\">\n            // \t\t<Icon type=\"question-circle-o\" />\n            // \t</Tooltip>\n            // \t</span>\n            // )}\n            ,\n            children: getFieldDecorator('name', {\n              rules: [{\n                required: true,\n                message: '请输入您的用户名!',\n                whitespace: true\n              }]\n            })( /*#__PURE__*/_jsxDEV(Input, {\n              style: {\n                width: '280px'\n              },\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 7\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u5BC6\\u7801\",\n            children: getFieldDecorator('password', {\n              rules: [{\n                required: true,\n                message: '请输入您的密码!'\n              }, {\n                validator: this.validateToNextPassword\n              }]\n            })( /*#__PURE__*/_jsxDEV(Input, {\n              type: \"password\",\n              style: {\n                width: '280px'\n              },\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 7\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u786E\\u8BA4\\u5BC6\\u7801\",\n            children: getFieldDecorator('confirm', {\n              rules: [{\n                required: true,\n                message: '请确认您的密码!'\n              }, {\n                validator: this.compareToFirstPassword\n              }]\n            })( /*#__PURE__*/_jsxDEV(Input, {\n              type: \"password\",\n              style: {\n                width: '280px'\n              },\n              placeholder: \"\\u8BF7\\u518D\\u6B21\\u8F93\\u5165\\u5BC6\\u7801\",\n              onBlur: this.handleConfirmBlur\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 7\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailFormItemLayout,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '280px',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                className: \"submit\",\n                disabled: !this.state.codeId,\n                children: \"\\u6CE8\\u518C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 6\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                className: \"login\",\n                to: \"/login\",\n                children: \"\\u5DF2\\u6709\\u8D26\\u6237\\u767B\\u5F55\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 6\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nRegister = Form.create()(Register);\nexport default Register;","map":{"version":3,"sources":["/Volumes/Macintosh HD - 数据/privateTest/private/src/pages/register.js"],"names":["React","Component","Register","state","confirmDirty","autoCompleteResult","codeId","countDown","countDownStr","handleSubmit","e","preventDefault","dispatch","props","form","validateFieldsAndScroll","err","values","console","log","paramsObj","name","phone","code","password","userRegister","handleConfirmBlur","value","target","setState","compareToFirstPassword","rule","callback","getFieldValue","validateToNextPassword","length","validateFields","force","setTime","countDownNum","timer","setTimeout","clearTimeout","getCode","phoneNum","getRegisterPhoneCode","then","json","data","message","error","componentWillUnmount","render","getFieldDecorator","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","GetCodeButton","marginLeft","width","bind","phoneRule","logoImg","marginTop","rules","required","pattern","RegExp","whitespace","validator","display","justifyContent","alignItems","Form","create"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;;AACA,MAAMC,QAAN,SAAuBD,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAChCE,KADgC,GACxB;AACPC,MAAAA,YAAY,EAAE,KADP;AAEDC,MAAAA,kBAAkB,EAAE,EAFnB;AAGDC,MAAAA,MAAM,EAAC,EAHN;AAIDC,MAAAA,SAAS,EAAE,KAJV;AAKDC,MAAAA,YAAY,EAAE;AALb,KADwB;;AAAA,SAShCC,YATgC,GAShBC,CAAD,IAAO;AACrBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAe,KAAKC,KAA1B;AACA,WAAKA,KAAL,CAAWC,IAAX,CAAgBC,uBAAhB,CAAwC,CAACC,GAAD,EAAMC,MAAN,KAAiB;AACxD,YAAI,CAACD,GAAL,EAAU;AACGE,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,MAAzC;AACA,gBAAMG,SAAS,GAAG;AACdC,YAAAA,IAAI,EAACJ,MAAM,CAACI,IADE;AAEdC,YAAAA,KAAK,EAACL,MAAM,CAACK,KAFC;AAGdC,YAAAA,IAAI,EAACN,MAAM,CAACM,IAHE;AAIdjB,YAAAA,MAAM,EAAC,KAAKH,KAAL,CAAWG,MAJJ;AAKdkB,YAAAA,QAAQ,EAACP,MAAM,CAACO;AALF,WAAlB;AAOZZ,UAAAA,QAAQ,CAACa,YAAY,CAACL,SAAD,CAAb,CAAR;AACA;AACD,OAZD;AAaA,KAzB+B;;AAAA,SA2BhCM,iBA3BgC,GA2BXhB,CAAD,IAAO;AAC1B,YAAMiB,KAAK,GAAGjB,CAAC,CAACkB,MAAF,CAASD,KAAvB;AACA,WAAKE,QAAL,CAAc;AACbzB,QAAAA,YAAY,EAAE,KAAKD,KAAL,CAAWC,YAAX,IAA2B,CAAC,CAACuB;AAD9B,OAAd;AAGA,KAhC+B;;AAAA,SAkChCG,sBAlCgC,GAkCP,CAACC,IAAD,EAAOJ,KAAP,EAAcK,QAAd,KAA2B;AACnD,YAAMlB,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAxB;;AACA,UAAIa,KAAK,IAAIA,KAAK,KAAKb,IAAI,CAACmB,aAAL,CAAmB,UAAnB,CAAvB,EAAuD;AACtDD,QAAAA,QAAQ,CAAC,aAAD,CAAR;AACA,OAFD,MAEO;AACNA,QAAAA,QAAQ;AACR;AACD,KAzC+B;;AAAA,SA2ChCE,sBA3CgC,GA2CP,CAACH,IAAD,EAAOJ,KAAP,EAAcK,QAAd,KAA2B;AACnD,YAAMlB,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAxB;;AACA,UAAIa,KAAK,CAACQ,MAAN,GAAe,CAAnB,EAAsB;AACrBH,QAAAA,QAAQ,CAAC,YAAD,CAAR;AACA;;AACD,UAAIL,KAAK,IAAI,KAAKxB,KAAL,CAAWC,YAAxB,EAAsC;AACtCU,QAAAA,IAAI,CAACsB,cAAL,CAAoB,CAAC,SAAD,CAApB,EAAiC;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAAjC;AACC;;AACDL,MAAAA,QAAQ;AACL,KApD4B;;AAAA,SAqD7BM,OArD6B,GAqDlBC,YAAD,IAAkB;AACxBA,MAAAA,YAAY;AACZ/B,MAAAA,YAAY,GAAG+B,YAAY,GAAG,GAA9B;AACA,WAAKV,QAAL,CAAc;AACVrB,QAAAA,YAAY,EAAEA;AADJ,OAAd;AAGAgC,MAAAA,KAAK,GAAGC,UAAU,CAAC,MAAM;AACrB,aAAKH,OAAL,CAAaC,YAAb;AACH,OAFiB,EAEf,IAFe,CAAlB;;AAGA,UAAIA,YAAY,KAAK,CAArB,EAAwB;AACpB,aAAKV,QAAL,CAAc;AACVtB,UAAAA,SAAS,EAAE;AADD,SAAd;AAGAmC,QAAAA,YAAY,CAACF,KAAD,CAAZ;AACH;AAEJ,KArE4B;;AAAA,SAsE7BG,OAtE6B,GAsElB9B,KAAD,IAAW;AACjB,YAAM;AAAGoB,QAAAA;AAAH,UAAqBpB,KAAK,CAACC,IAAjC;AACA,YAAM;AAAEF,QAAAA;AAAF,UAAgB,KAAKC,KAA3B;AACA,YAAM+B,QAAQ,GAAGX,aAAa,CAAC,OAAD,CAA9B,CAHiB,CAIjB;;AACA,UAAIW,QAAJ,EAAc;AACVhC,QAAAA,QAAQ,CAACiC,oBAAoB,CAACD,QAAD,CAArB,CAAR,CACCE,IADD,CACMC,IAAI,IAAI;AACtB,cAAIA,IAAI,CAACxB,IAAL,KAAc,GAAlB,EAAuB;AACP,iBAAKM,QAAL,CAAc;AAC5BvB,cAAAA,MAAM,EAAEyC,IAAI,CAACC,IAAL,CAAU1C,MADU;AAE5BC,cAAAA,SAAS,EAAE;AAFiB,aAAd;AAIf,iBAAK+B,OAAL,CAAaC,YAAb;AACA;AACQ,SATD;AAUH,OAXD,MAWO;AACHU,QAAAA,OAAO,CAACC,KAAR,CAAc,UAAd;AACH;AACJ,KAzF4B;AAAA;;AA0F7BC,EAAAA,oBAAoB,GAAE;AAClB;AACAT,IAAAA,YAAY,CAACF,KAAD,CAAZ;AACH;;AACJY,EAAAA,MAAM,GAAG;AACR,UAAM;AAAEC,MAAAA;AAAF,QAAwB,KAAKxC,KAAL,CAAWC,IAAzC;AAEA,UAAMwC,cAAc,GAAG;AACtBC,MAAAA,QAAQ,EAAE;AACTC,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR,SADK;AAETC,QAAAA,EAAE,EAAE;AAAED,UAAAA,IAAI,EAAE;AAAR;AAFK,OADY;AAKtBE,MAAAA,UAAU,EAAE;AACXH,QAAAA,EAAE,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR,SADO;AAEXC,QAAAA,EAAE,EAAE;AAAED,UAAAA,IAAI,EAAE;AAAR;AAFO;AALU,KAAvB;AAUA,UAAMG,kBAAkB,GAAG;AAC1BD,MAAAA,UAAU,EAAE;AACXH,QAAAA,EAAE,EAAE;AACHC,UAAAA,IAAI,EAAE,EADH;AAEHI,UAAAA,MAAM,EAAE;AAFL,SADO;AAKXH,QAAAA,EAAE,EAAE;AACHD,UAAAA,IAAI,EAAE,EADH;AAEHI,UAAAA,MAAM,EAAE;AAFL;AALO;AADc,KAA3B,CAbQ,CAyBR;AACA;AACA;AACA;AACA;AACA;AACA;AACM;;AACA,UAAMC,aAAa,GAAG,KAAK3D,KAAL,CAAWI,SAAX,gBAClB,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,IAAI,EAAC,OAA5B;AAAqC,MAAA,KAAK,EAAE;AAACwD,QAAAA,UAAU,EAAE,MAAb;AAAqBC,QAAAA,KAAK,EAAE;AAA5B,OAA5C;AAAkF,MAAA,QAAQ,MAA1F;AAA2F,MAAA,OAAO,EAAE,KAAKrB,OAAL,CAAasB,IAAb,CAAkB,IAAlB,EAAwB,KAAKpD,KAA7B,CAApG;AAAA,gBACI,KAAKV,KAAL,CAAWK;AADf;AAAA;AAAA;AAAA;AAAA,YADkB,gBAKlB,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,IAAI,EAAC,OAA5B;AAAqC,MAAA,KAAK,EAAE;AAACuD,QAAAA,UAAU,EAAE,MAAb;AAAqBC,QAAAA,KAAK,EAAE;AAA5B,OAA5C;AAAkF,MAAA,OAAO,EAAE,KAAKrB,OAAL,CAAasB,IAAb,CAAkB,IAAlB,EAAwB,KAAKpD,KAA7B,CAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALJ;AASA,UAAMqD,SAAS,GAAC,oDAAhB;AACN,wBACC,QAAC,MAAD;AAAQ,MAAA,SAAS,EAAC,uBAAlB;AAAA,8BACC;AAAK,QAAA,SAAS,EAAC,YAAf;AAA4B,QAAA,KAAK,EAAE;AAACF,UAAAA,KAAK,EAAC;AAAP,SAAnC;AAAA,gCACC;AAAK,UAAA,GAAG,EAAEG,OAAV;AAAmB,UAAA,KAAK,EAAE;AAA1B;AAAA;AAAA;AAAA;AAAA,gBADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,eAKA;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,+BAIC,QAAC,IAAD,OAAUb,cAAV;AAA0B,UAAA,QAAQ,EAAE,KAAK7C,YAAzC;AAAuD,UAAA,KAAK,EAAE;AAAC2D,YAAAA,SAAS,EAAC;AAAX,WAA9D;AAAA,kCAaY,QAAC,QAAD;AAAW,YAAA,KAAK,EAAC,0BAAjB;AAAA,sBACKf,iBAAiB,CAAC,OAAD,EAAU;AACxBgB,cAAAA,KAAK,EAAE,CAAC;AAAEC,gBAAAA,QAAQ,EAAE,IAAZ;AAAkBrB,gBAAAA,OAAO,EAAE,UAA3B;AAAuCsB,gBAAAA,OAAO,EAAE,IAAIC,MAAJ,CAAWN,SAAX;AAAhD,eAAD;AADiB,aAAV,CAAjB,eAGG,QAAC,KAAD;AAAO,cAAA,KAAK,EAAE;AAACF,gBAAAA,KAAK,EAAE;AAAR,eAAd;AAAgC,cAAA,WAAW,EAAC;AAA5C;AAAA;AAAA;AAAA;AAAA,oBAHH;AADL;AAAA;AAAA;AAAA;AAAA,kBAbZ,eAoBY,QAAC,QAAD;AAAW,YAAA,KAAK,EAAC,oBAAjB;AAAA,uBACKX,iBAAiB,CAAC,MAAD,EAAS;AACvBgB,cAAAA,KAAK,EAAE,CAAC;AAAEC,gBAAAA,QAAQ,EAAE,IAAZ;AAAkBrB,gBAAAA,OAAO,EAAE;AAA3B,eAAD;AADgB,aAAT,CAAjB,eAGG,QAAC,KAAD;AAAO,cAAA,IAAI,EAAC,OAAZ;AAAoB,cAAA,KAAK,EAAE;AAACe,gBAAAA,KAAK,EAAE;AAAR,eAA3B;AAA6C,cAAA,WAAW,EAAC;AAAzD;AAAA;AAAA;AAAA;AAAA,oBAHH,CADL,EAMKF,aANL;AAAA;AAAA;AAAA;AAAA;AAAA,kBApBZ,eA4BA,QAAC,IAAD,CAAM,IAAN;AACgB,YAAA,KAAK,EAAC,oBADtB,CAEC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATD;AAAA,sBAWET,iBAAiB,CAAC,MAAD,EAAS;AAC1BgB,cAAAA,KAAK,EAAE,CAAC;AAAEC,gBAAAA,QAAQ,EAAE,IAAZ;AAAkBrB,gBAAAA,OAAO,EAAE,WAA3B;AAAwCwB,gBAAAA,UAAU,EAAE;AAApD,eAAD;AADmB,aAAT,CAAjB,eAGA,QAAC,KAAD;AAAO,cAAA,KAAK,EAAE;AAACT,gBAAAA,KAAK,EAAE;AAAR,eAAd;AAAgC,cAAA,WAAW,EAAC;AAA5C;AAAA;AAAA;AAAA;AAAA,oBAHA;AAXF;AAAA;AAAA;AAAA;AAAA,kBA5BA,eA6CY,QAAC,IAAD,CAAM,IAAN;AAAW,YAAA,KAAK,EAAC,cAAjB;AAAA,sBACVX,iBAAiB,CAAC,UAAD,EAAa;AAC9BgB,cAAAA,KAAK,EAAE,CAAC;AACPC,gBAAAA,QAAQ,EAAE,IADH;AACSrB,gBAAAA,OAAO,EAAE;AADlB,eAAD,EAEJ;AACFyB,gBAAAA,SAAS,EAAE,KAAKxC;AADd,eAFI;AADuB,aAAb,CAAjB,eAOA,QAAC,KAAD;AAAO,cAAA,IAAI,EAAC,UAAZ;AAAuB,cAAA,KAAK,EAAE;AAAC8B,gBAAAA,KAAK,EAAE;AAAR,eAA9B;AAAgD,cAAA,WAAW,EAAC;AAA5D;AAAA;AAAA;AAAA;AAAA,oBAPA;AADU;AAAA;AAAA;AAAA;AAAA,kBA7CZ,eAwDA,QAAC,IAAD,CAAM,IAAN;AAAW,YAAA,KAAK,EAAC,0BAAjB;AAAA,sBACEX,iBAAiB,CAAC,SAAD,EAAY;AAC7BgB,cAAAA,KAAK,EAAE,CAAC;AACRC,gBAAAA,QAAQ,EAAE,IADF;AACQrB,gBAAAA,OAAO,EAAE;AADjB,eAAD,EAEJ;AACHyB,gBAAAA,SAAS,EAAE,KAAK5C;AADb,eAFI;AADsB,aAAZ,CAAjB,eAOA,QAAC,KAAD;AAAO,cAAA,IAAI,EAAC,UAAZ;AAAuB,cAAA,KAAK,EAAE;AAACkC,gBAAAA,KAAK,EAAE;AAAR,eAA9B;AAAgD,cAAA,WAAW,EAAC,4CAA5D;AAAuE,cAAA,MAAM,EAAE,KAAKtC;AAApF;AAAA;AAAA;AAAA;AAAA,oBAPA;AADF;AAAA;AAAA;AAAA;AAAA,kBAxDA,eAoEA,QAAC,IAAD,CAAM,IAAN,OAAekC,kBAAf;AAAA,mCACgB;AAAK,cAAA,KAAK,EAAE;AAACI,gBAAAA,KAAK,EAAE,OAAR;AAAgBW,gBAAAA,OAAO,EAAC,MAAxB;AAA+BC,gBAAAA,cAAc,EAAC,eAA9C;AAA8DC,gBAAAA,UAAU,EAAC;AAAzE,eAAZ;AAAA,sCACf,QAAC,MAAD;AAAQ,gBAAA,IAAI,EAAC,SAAb;AAAuB,gBAAA,QAAQ,EAAC,QAAhC;AAAyC,gBAAA,SAAS,EAAC,QAAnD;AAA4D,gBAAA,QAAQ,EAAE,CAAC,KAAK1E,KAAL,CAAWG,MAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADe,eAEf,QAAC,IAAD;AAAM,gBAAA,SAAS,EAAC,OAAhB;AAAwB,gBAAA,EAAE,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFe;AAAA;AAAA;AAAA;AAAA;AAAA;AADhB;AAAA;AAAA;AAAA;AAAA,kBApEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJD;AAAA;AAAA;AAAA;AAAA,cALA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAwFC;;AAjO8B;;AAmOjCJ,QAAQ,GAAG4E,IAAI,CAACC,MAAL,GAAc7E,QAAd,CAAX;AACA,eAAeA,QAAf","sourcesContent":["import React, { Component } from 'react';\nclass Register extends Component {\n\tstate = {\n\t\tconfirmDirty: false,\n        autoCompleteResult: [],\n        codeId:'',\n        countDown: false,\n        countDownStr: '',\n\t};\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tconst { dispatch } = this.props\n\t\tthis.props.form.validateFieldsAndScroll((err, values) => {\n\t\t\tif (!err) {\n                console.log('Received values of form: ', values);\n                const paramsObj = {\n                    name:values.name,\n                    phone:values.phone,\n                    code:values.code,\n                    codeId:this.state.codeId,\n                    password:values.password,\n                }\n\t\t\t\tdispatch(userRegister(paramsObj))\n\t\t\t}\n\t\t});\n\t}\n\n\thandleConfirmBlur = (e) => {\n\t\tconst value = e.target.value;\n\t\tthis.setState({\n\t\t\tconfirmDirty: this.state.confirmDirty || !!value\n\t\t});\n\t}\n\n\tcompareToFirstPassword = (rule, value, callback) => {\n\t\tconst form = this.props.form;\n\t\tif (value && value !== form.getFieldValue('password')) {\n\t\t\tcallback('两次输入的密码不一致!');\n\t\t} else {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\tvalidateToNextPassword = (rule, value, callback) => {\n\t\tconst form = this.props.form;\n\t\tif (value.length < 6) {\n\t\t\tcallback('密码长度必须大于6位')\n\t\t}\n\t\tif (value && this.state.confirmDirty) {\n\t\tform.validateFields(['confirm'], { force: true });\n\t\t}\n\t\tcallback();\n    }\n    setTime = (countDownNum) => {\n        countDownNum --\n        countDownStr = countDownNum + 'S'\n        this.setState({\n            countDownStr: countDownStr\n        })\n        timer = setTimeout(() => { \n            this.setTime(countDownNum) \n        }, 1000)\n        if (countDownNum === 0) {\n            this.setState({\n                countDown: false\n            })\n            clearTimeout(timer)\n        }\n\n    }\n    getCode = (props) => {\n        const {  getFieldValue } = props.form\n        const { dispatch, } = this.props\n        const phoneNum = getFieldValue('phone')\n        // console.log(phoneNum)\n        if (phoneNum) {\n            dispatch(getRegisterPhoneCode(phoneNum))\n            .then(json => {\n\t\t\t\tif (json.code === 200) {\n                    this.setState({\n\t\t\t\t\t\tcodeId: json.data.codeId,\n\t\t\t\t\t\tcountDown: true\n\t\t\t\t\t})\n\t\t\t\t\tthis.setTime(countDownNum) \n\t\t\t\t}\n            })\n        } else {\n            message.error('请输入手机号码！')\n        }\n    }\n    componentWillUnmount(){\n        //清除事件\n        clearTimeout(timer)\n    }\n\trender() {\n\t\tconst { getFieldDecorator } = this.props.form;\n\t\t\n\t\tconst formItemLayout = {\n\t\t\tlabelCol: {\n\t\t\t\txs: { span: 24 },\n\t\t\t\tsm: { span: 8},\n\t\t\t},\n\t\t\twrapperCol: {\n\t\t\t\txs: { span: 24 },\n\t\t\t\tsm: { span: 16 },\n\t\t\t},\n\t\t};\n\t\tconst tailFormItemLayout = {\n\t\t\twrapperCol: {\n\t\t\t\txs: {\n\t\t\t\t\tspan: 24,\n\t\t\t\t\toffset: 0,\n\t\t\t\t},\n\t\t\t\tsm: {\n\t\t\t\t\tspan: 16,\n\t\t\t\t\toffset: 8,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\t// const prefixSelector = getFieldDecorator('prefix', {\n\t\t// \tinitialValue: '86',\n\t\t// })(\n\t\t// \t<Select style={{ width: 70 }}>\n\t\t// \t\t<Option value=\"86\">+86</Option>\n\t\t// \t\t{/* <Option value=\"87\">+87</Option> */}\n\t\t// \t</Select>\n        // );\n        const GetCodeButton = this.state.countDown ? (\n            <Button type=\"primary\" size=\"large\"  style={{marginLeft: '10px', width: '120px'}} disabled onClick={this.getCode.bind(this, this.props)}>\n               {this.state.countDownStr}\n            </Button>\n        ) : (\n            <Button type=\"primary\" size=\"large\"  style={{marginLeft: '10px', width: '120px'}} onClick={this.getCode.bind(this, this.props)}>\n                获取验证码\n            </Button>\n        )\n        const phoneRule=\"^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$\"\n\t\treturn (\n\t\t\t<Layout className='user-layout-container'>\n\t\t\t\t<div className='login-logo' style={{width:'580px'}}>\n\t\t\t\t\t<img src={logoImg} width={179} />\n\t\t\t\t\t<span>让每个医学研究参与者都放心</span>\n\t\t\t\t</div>\n\t\t\t<div className='registerBox'>\n\t\t\t\t{/* <h3>\n\t\t\t\t注册\n\t\t\t\t</h3> */}\n\t\t\t\t<Form {...formItemLayout} onSubmit={this.handleSubmit} style={{marginTop:60}}>\n\t\t\t\t{/* <Form.Item label=\"邮箱\">\n\t\t\t\t\t{getFieldDecorator('email', {\n\t\t\t\t\t\trules: [{\n\t\t\t\t\t\ttype: 'email', message: '无效的邮箱格式',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\trequired: true, message: '请输入您的邮箱!',\n\t\t\t\t\t\t}],\n\t\t\t\t\t})(\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item> */}\n\t\t\t\t\n                <FormItem  label=\"手机号码\">\n                    {getFieldDecorator('phone', {\n                        rules: [{ required: true, message: '请输入手机号码！', pattern: new RegExp(phoneRule) }],\n                    })(\n                        <Input style={{width: '280px'}} placeholder=\"请输入手机号码\" />\n                    )}\n                </FormItem>\n                <FormItem  label=\"验证码\">\n                    {getFieldDecorator('code', {\n                        rules: [{ required: true, message: '请输入验证码！' }],\n                    })(\n                        <Input size=\"large\" style={{width: '150px'}} placeholder=\"请输入验证码\" />\n                    )}\n                    {GetCodeButton}\n                </FormItem>\n\t\t\t\t<Form.Item\n                    label='用户名'\n\t\t\t\t\t// label={(\n\t\t\t\t\t// \t<span>\n\t\t\t\t\t// \t用户名&nbsp;\n\t\t\t\t\t// \t<Tooltip title=\"你想别人如何称呼你?\">\n\t\t\t\t\t// \t\t<Icon type=\"question-circle-o\" />\n\t\t\t\t\t// \t</Tooltip>\n\t\t\t\t\t// \t</span>\n\t\t\t\t\t// )}\n\t\t\t\t>\n\t\t\t\t\t{getFieldDecorator('name', {\n\t\t\t\t\t\trules: [{ required: true, message: '请输入您的用户名!', whitespace: true }],\n\t\t\t\t\t})(\n\t\t\t\t\t\t<Input style={{width: '280px'}} placeholder=\"请输入用户名\" />\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item>\n                <Form.Item label=\"密码\" >\n\t\t\t\t\t{getFieldDecorator('password', {\n\t\t\t\t\t\trules: [{\n\t\t\t\t\t\t\trequired: true, message: '请输入您的密码!',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tvalidator: this.validateToNextPassword,\n\t\t\t\t\t\t}],\n\t\t\t\t\t})(\n\t\t\t\t\t\t<Input type=\"password\" style={{width: '280px'}} placeholder=\"请输入密码\" />\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"确认密码\" >\n\t\t\t\t\t{getFieldDecorator('confirm', {\n\t\t\t\t\t\trules: [{\n\t\t\t\t\t\trequired: true, message: '请确认您的密码!',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\tvalidator: this.compareToFirstPassword,\n\t\t\t\t\t\t}],\n\t\t\t\t\t})(\n\t\t\t\t\t\t<Input type=\"password\" style={{width: '280px'}} placeholder=\"请再次输入密码\"  onBlur={this.handleConfirmBlur} />\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item>\n\t\t\t\t\n\t\t\t\t<Form.Item {...tailFormItemLayout}>\n                    <div style={{width: '280px',display:'flex',justifyContent:'space-between',alignItems:'center'}}>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className='submit' disabled={!this.state.codeId} >注册</Button>\n\t\t\t\t\t<Link className='login' to=\"/login\" >已有账户登录</Link>\n                    </div>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t</div>\n\t\t</Layout>\n    );\n  }\n}\nRegister = Form.create()(Register)\nexport default Register;"]},"metadata":{},"sourceType":"module"}